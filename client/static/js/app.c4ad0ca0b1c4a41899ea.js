webpackJsonp([1],{"1/oy":function(e,t){},"6HPJ":function(e,t){},"7wdN":function(e,t){},"8si6":function(e,t){},"9M+g":function(e,t){},CE8n:function(e,t){},GfHa:function(e,t){},Id91:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("/5sW"),s=r("Dd8w"),a=r.n(s),o=r("NYxO"),i={name:"App",computed:a()({},Object(o.c)(["isLoggedIn"]))},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark"}},[r("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),e._v(" "),r("b-navbar-brand",{attrs:{href:"#"}},[e._v("Bocelli")]),e._v(" "),r("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[r("b-navbar-nav",[e.isLoggedIn?[r("b-nav-item",{attrs:{href:"#/"}},[e._v("Home")]),e._v(" "),r("b-nav-item",{attrs:{href:"#/chat"}},[e._v("Chat")]),e._v(" "),r("b-nav-item",{attrs:{href:"#/subs"}},[e._v("Subscriptions")])]:[r("b-nav-item",{attrs:{href:"#/login"}},[e._v("Login")]),e._v(" "),r("b-nav-item",{attrs:{href:"#/register"}},[e._v("Register")])]],2)],1)],1),e._v(" "),r("router-view")],1)},staticRenderFns:[]};var c=r("VU/8")(i,u,!1,function(e){r("7wdN")},null,null).exports,l=r("Xxa5"),p=r.n(l),f=r("exGp"),v=r.n(f),m=r("mtWM"),d=r.n(m);d.a.defaults.baseURL="https://bocelli.herokuapp.com";var h,b,g,_,x=function(e){return d.a.post("/api/user/login",e)},y=function(e){return d.a.post("/api/user/register",e)},w=function(){return d.a.get("/api/help-requests")},N=function(e){return d.a.put("/api/remove-help-request",{helpRequestID:e})},E=this,k={login:(_=v()(p.a.mark(function e(t,r){var n=t.commit;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(r);case 3:r=e.sent,n("SET_USER",r.data),e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==e.t0.response.status){e.next=11;break}throw new Error("Wrong Username/Password given");case 11:case"end":return e.stop()}},e,E,[[0,7]])})),function(e,t){return _.apply(this,arguments)}),register:(g=v()(p.a.mark(function e(t,r){var n=t.commit;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(r);case 3:r=e.sent,n("SET_USER",r.data),e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==e.t0.response.status){e.next=11;break}throw new Error("Wrong Username/Password given");case 11:case"end":return e.stop()}},e,E,[[0,7]])})),function(e,t){return g.apply(this,arguments)}),helpRequests:(b=v()(p.a.mark(function e(t){var r,n=t.commit;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:r=e.sent,n("SET_REQUESTS",r.data);case 4:case"end":return e.stop()}},e,E)})),function(e){return b.apply(this,arguments)}),giveHelp:(h=v()(p.a.mark(function e(t,r){var n=t.dispatch,s=t.commit;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(r);case 2:s("ACTIVE_CALL",r),n("helpRequests");case 4:case"end":return e.stop()}},e,E)})),function(e,t){return h.apply(this,arguments)})};n.a.use(o.a);var R=new o.a.Store({state:{user:{},requests:[],activeCall:""},getters:{user:function(e){var t=e.user;return t},isLoggedIn:function(e){return!!e.user.username},onCallWith:function(e){return"TODO"},getRequests:function(e){return e.requests.reverse()}},mutations:{SET_USER:function(e,t){e.user=t},SET_REQUESTS:function(e,t){e.requests=t},ACTIVE_CALL:function(e,t){e.activeCall=t}},actions:k}),T=r("/ocq"),M=void 0,C={beforeRouteEnter:function(e,t,r){r(function(e){e.user.username||r({name:"Login"})})},data:function(){return{}},mounted:function(){var e=this;M=setInterval(function(){e.helpRequests()},2e3)},beforeDestroy:function(){clearInterval(M)},computed:a()({},Object(o.d)(["user"]),Object(o.c)(["isLoggedIn","getRequests"])),methods:a()({},Object(o.b)(["helpRequests","giveHelp"]),{help:function(e){var t=this;this.giveHelp(e).then(function(){t.$router.push({name:"Chat"})})}})},L={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",[e._v("Hello "+e._s(e.user.firstName)+" "+e._s(e.user.lastName))]),e._v(" "),r("h2",[e._v("People currently looking for help")]),e._v(" "),r("div",[0===e.getRequests.length?r("div",[e._v("\n      No on is currently looking for help\n    ")]):e._e(),e._v(" "),e._l(e.getRequests,function(t){return r("b-card",{key:t.id,staticClass:"mb-2",attrs:{title:t.userID}},[r("p",{staticClass:"card-text",staticStyle:{"font-size":"50px"}},[e._v("\n        "+e._s(t.text)+"\n      ")]),e._v(" "),r("b-button",{attrs:{variant:"primary"},on:{click:function(r){e.help(t.id)}}},[e._v("Start Helping")])],1)})],2)])},staticRenderFns:[]};var S=r("VU/8")(C,L,!1,function(e){r("8si6")},null,null).exports,D={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("b-alert",{attrs:{variant:"danger",show:""!==e.error}},[e._v(e._s(e.error))]),e._v(" "),r("h2",[e._v("Please Login")]),e._v(" "),r("b-form",{on:{submit:e.doLogin}},[r("b-form-group",{attrs:{label:"Username"}},[r("b-form-input",{attrs:{type:"text"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"password"}},[r("b-form-input",{attrs:{type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),r("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.doLogin}},[e._v("Submit")])],1)],1)},staticRenderFns:[]};var j=r("VU/8")({data:function(){return{user:{},error:""}},methods:{doLogin:function(){var e=this;this.user.username&&this.user.password?this.$store.dispatch("login",this.user).then(function(){e.$router.replace({name:"Home"})}).catch(function(t){e.error=t.message}):this.error="Please fill all the field"}}},D,!1,function(e){r("CE8n")},null,null).exports,U={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("b-alert",{attrs:{variant:"danger",show:""!==e.error}},[e._v(e._s(e.error))]),e._v(" "),r("h2",[e._v("Register")]),e._v(" "),r("b-form",{on:{submit:e.doLogin}},[r("b-form-group",{attrs:{label:"Username"}},[r("b-form-input",{attrs:{type:"text"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"password"}},[r("b-form-input",{attrs:{type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"First Name"}},[r("b-form-input",{attrs:{type:"text"},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"Last Name"}},[r("b-form-input",{attrs:{type:"text"},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"Phone"}},[r("b-form-input",{attrs:{type:"tel"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),e._v(" "),r("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.doLogin}},[e._v("Register")])],1)],1)},staticRenderFns:[]};var O=r("VU/8")({data:function(){return{user:{},error:""}},methods:{doLogin:function(){var e=this;this.user.username&&this.user.password?this.$store.dispatch("register",this.user).then(function(){e.$router.replace({name:"Home"})}).catch(function(t){e.error=t.message}):this.error="Please fill all the field"}}},U,!1,function(e){r("6HPJ")},null,null).exports,$=r("wXKC");function H(e){e&&console.log(e.message)}var I=$.initSession("46228482","2_MX40NjIyODQ4Mn5-MTU0MzQ5OTIyNDYyNH5Yd0paenpZQm1NclM4MlF4V0N1ajNIV2Z-fg");I.on("streamDestroyed",function(e){if("networkDisconnected"===e.reason){e.preventDefault();var t=I.getSubscribersForStream(e.stream);if(t.length>0)document.getElementById(t[0].id).innerHTML="Lost connection. This could be due to your internet connection or because the other party lost their connection.",e.preventDefault()}});var V={beforeRouteEnter:function(e,t,r){r(function(e){e.isLoggedIn||r({name:"Login"})})},data:function(){return{session:{}}},mounted:function(){var e=this;console.log("monting Chat");var t=$.initPublisher(this.$el.children.publisher,{insertMode:"replace",publishAudio:!0,publishVideo:!1},H);I.connect("T1==cGFydG5lcl9pZD00NjIyODQ4MiZzaWc9NDIyNDJkZTZkNjdjMGY1ODg1ZjcwOTAwYzk0Y2E4M2YzMjZiZTM0MjpzZXNzaW9uX2lkPTJfTVg0ME5qSXlPRFE0TW41LU1UVTBNelE1T1RJeU5EWXlOSDVZZDBwYWVucFpRbTFOY2xNNE1sRjRWME4xYWpOSVYyWi1mZyZjcmVhdGVfdGltZT0xNTQzNDk5MjU5Jm5vbmNlPTAuOTQ0MjU0MjkxODA3MDk5MyZyb2xlPXB1Ymxpc2hlciZleHBpcmVfdGltZT0xNTQ0MTA0MDU4JmluaXRpYWxfbGF5b3V0X2NsYXNzX2xpc3Q9",function(e){e?(H(e),console.log("error")):I.publish(t,H)}),I.on("streamCreated",function(t){console.log("test"),I.subscribe(t.stream,e.$el.children.subscriber,{insertMode:"replace"},H)})},beforeDestroy:function(){I&&(I.disconnect(),I.off())},computed:a()({},Object(o.c)(["onCallWith","isLoggedIn"]),Object(o.d)(["activeCall"])),methods:{disconnect:function(){I.disconnect(),I.off(),this.$router.push({name:"Home"})}}},Z={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",[e._v("On call with: "+e._s(e.activeCall))]),e._v(" "),r("b-button",{attrs:{variant:"danger"},on:{click:e.disconnect}},[e._v("End Call")]),e._v(" "),r("div",{attrs:{id:"publisher"}}),e._v(" "),r("div",{attrs:{id:"subscriber"}})],1)},staticRenderFns:[]},q=r("VU/8")(V,Z,!1,null,null,null).exports,W={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h2",[e._v("Here are your subscriptions")]),e._v(" "),r("b-list-group",[r("b-list-group-item",[e._v("Inbal Ben Dayan")]),e._v(" "),r("b-list-group-item",[e._v("Hellen Keller")]),e._v(" "),r("b-list-group-item",[e._v("Stevie Wonder")]),e._v(" "),r("b-list-group-item",{staticStyle:{"font-size":"40px"}},[e._v("Our beautiful judges which are obviously not blind since they can see that this is the best project ðŸ˜œ")])],1)],1)},staticRenderFns:[]},P=r("VU/8")({},W,!1,null,null,null).exports;n.a.use(T.a);var F=new T.a({routes:[{path:"/",name:"Home",component:S},{path:"/login",name:"Login",component:j},{path:"/register",name:"Register",component:O},{path:"/chat",name:"Chat",component:q},{path:"/subs",name:"Subscriptions",component:P}]}),Y=r("e6fC");r("Jmt5"),r("9M+g");n.a.config.productionTip=!1,n.a.use(Y.a),new n.a({el:"#app",store:R,router:F,render:function(e){return e(c)}})},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c4ad0ca0b1c4a41899ea.js.map